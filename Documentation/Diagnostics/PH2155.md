# PH2155: Avoid Packages with Unacceptable Licenses

| Property | Value  |
|--|--|
| Package | [Philips.CodeAnalysis.SecurityAnalyzers](https://www.nuget.org/packages/Philips.CodeAnalysis.SecurityAnalyzers) |
| Diagnostic ID | PH2155 |
| Category  | [Security](../Security.md) |
| Analyzer | [LicenseAnalyzer](https://github.com/philips-software/roslyn-analyzers/blob/main/Philips.CodeAnalysis.SecurityAnalyzers/LicenseAnalyzer.cs)
| CodeFix  | No |
| Severity | Info |
| Enabled By Default | No |

## Introduction

This rule identifies packages with unacceptable licenses that may pose compliance risks to your project.

## Reason

Packages with unacceptable licenses, particularly copyleft licenses like GPL, can impose legal obligations on your project. These licenses may require you to open-source your entire project or comply with specific distribution terms. It's important to review and approve such dependencies before including them in your codebase.

## How to fix violations

1. **Review the package license**: Examine whether the license is truly incompatible with your project's requirements
2. **Find alternatives**: Look for packages with more permissive licenses (MIT, BSD, Apache-2.0)
3. **Add to allowed list**: If the license is acceptable for your use case, add it to the `Allowed.Licenses.txt` configuration file
4. **Remove the package**: If no suitable alternative exists and the license is unacceptable, remove the package dependency

## Examples

### Package with unacceptable license

```xml
<!-- This package reference might trigger PH2155 if it has a GPL license -->
<PackageReference Include="SomeGplPackage" Version="1.0.0" />
```

### Resolution options

```text
# Allowed.Licenses.txt - Add acceptable licenses to this file
MIT
BSD-2-Clause
BSD-3-Clause
Apache-2.0
```

## Configuration
This analyzer has not been implemented yet.

This analyzer is **disabled by default** and must be explicitly enabled. You can enable it in your project file or through analyzer configuration.

Configure allowed licenses by creating an `Allowed.Licenses.txt` file in your project with one license identifier per line.

