# PH2152: Avoid unnecessary typed discard

| Property | Value  |
|--|--|
| Package | [Philips.CodeAnalysis.MaintainabilityAnalyzers](https://www.nuget.org/packages/Philips.CodeAnalysis.MaintainabilityAnalyzers) |
| Diagnostic ID | PH2152 |
| Category  | [Naming](../Naming.md) |
| Analyzer | [AvoidVariableNamedUnderscoreAnalyzer](https://github.com/philips-software/roslyn-analyzers/blob/main/Philips.CodeAnalysis.MaintainabilityAnalyzers/Naming/AvoidVariableNamedUnderscoreAnalyzer.cs)
| CodeFix  | No |
| Severity | Error |
| Enabled By Default | Yes |

## Introduction

This rule flags unnecessary typed discards like `out string _` when anonymous discard `out _` would work equally well.

This rule does not flag typed discards that are necessary for overload resolution.

## Reason

Anonymous discards have clearer intent and are more concise than typed discards when the type information is not needed for overload resolution.

## How to fix violations

Replace typed discards with anonymous discards when the type is not needed for overload resolution.

## Examples

### Unnecessary Typed Discards (Flagged)

```csharp
// These are flagged - unnecessary typed discards when anonymous would work
GetValue(out string _);           // Should be: GetValue(out _);
TryParseHelper("123", out int _); // Should be: TryParseHelper("123", out _);

public void GetValue(out string value) { value = "test"; }
public bool TryParseHelper(string input, out int result) { result = 42; return true; }
```

### Necessary Typed Discards (NOT Flagged)

```csharp
// These are NOT flagged - necessary for overload resolution
Parse("123", out int _);          // Disambiguates from Parse(string, out string)
Parse("test", out string _);      // Disambiguates from Parse(string, out int)

// Example overloaded methods
public bool Parse(string input, out int result) { result = 42; return true; }
public bool Parse(string input, out string result) { result = input; return true; }
```

### Correct Usage (NOT Flagged)

```csharp
// Use proper anonymous discards - these are NOT flagged
GetValue(out _);                      // Anonymous discard in out parameter
TryParseHelper("123", out _);         // Anonymous discard in out parameter

// Typed discards are allowed when needed for overload resolution
Parse("123", out int _);       // Needed to select correct overload
Parse("test", out string _);   // Needed to select correct overload
```

## Configuration

This rule is enabled by default with Error severity.

## Suppression

```csharp
[SuppressMessage("Philips.CodeAnalysis.MaintainabilityAnalyzers", "PH2152:Avoid unnecessary typed discard", Justification = "Reviewed.")]
```